# PATHS - Pequenos Passos

## Documenta√ß√£o de Navega√ß√£o e Fluxos do Aplicativo

---

## 1. Vis√£o Geral

Este documento descreve todos os caminhos de navega√ß√£o, telas e fluxos de usu√°rio do aplicativo Pequenos Passos.

---

## 2. Arquitetura de Navega√ß√£o

### 2.1 Sistema Utilizado
- **Framework**: Jetpack Compose Navigation
- **Padr√£o**: Single Activity Architecture
- **Gerenciamento**: NavController centralizado

---

## 3. Fluxos de Navega√ß√£o

### 3.1 Fluxo Atual (MVP-06)

```
SplashScreen (3s)
    ‚Üì
HomeScreen
    ‚îú‚îÄ‚îÄ Bot√£o "Cadastro" ‚Üí [Em desenvolvimento]
    ‚îú‚îÄ‚îÄ Bot√£o "Teste R√°pido" ‚Üí [Em desenvolvimento]
    ‚îú‚îÄ‚îÄ Bot√£o "Atividades" ‚Üí [Em desenvolvimento]
    ‚îî‚îÄ‚îÄ Bot√£o "Debug" ‚Üí DebugScreen
                          ‚îú‚îÄ‚îÄ MVP-01: Estrutura Base ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-02: Entidades ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-03: Database ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-04: Reposit√≥rios ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-05: Use Cases ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-06: Theme ‚úÖ
                          ‚îú‚îÄ‚îÄ TTS Test ‚Üí TtsTestScreen
                          ‚îî‚îÄ‚îÄ ASR Test ‚Üí AsrTestScreen
```

### 3.2 Fluxo Planejado (MVP-07+)

```
SplashScreen (3s)
    ‚Üì
HomeScreen (v1.8.0)
    ‚îú‚îÄ‚îÄ Bot√£o "Cadastrar Crian√ßa" ‚Üí OnboardingScreen
    ‚îÇ                                ‚îî‚îÄ‚îÄ Adicionar Perfil da Crian√ßa
    ‚îÇ                                    (vis√≠vel apenas se n√£o houver perfil)
    ‚îÇ
    ‚îú‚îÄ‚îÄ Bot√£o "Nova Tarefa" ‚Üí TaskFormScreen
    ‚îÇ                          ‚îî‚îÄ‚îÄ Adicionar Tarefa
    ‚îÇ                              (vis√≠vel apenas se houver perfil)
    ‚îÇ
    ‚îú‚îÄ‚îÄ Bot√£o "Teste R√°pido" ‚Üí TaskExecutionScreen
    ‚îÇ                          ‚îî‚îÄ‚îÄ Executar Tarefa R√°pida
    ‚îÇ                              (vis√≠vel apenas se houver perfil e tarefas)
    ‚îÇ
    ‚îú‚îÄ‚îÄ Bot√£o "Atividades" ‚Üí TaskListScreen
    ‚îÇ                         ‚îî‚îÄ‚îÄ Lista de Tarefas
    ‚îÇ                             (vis√≠vel apenas se houver perfil)
    ‚îÇ                             ‚îú‚îÄ‚îÄ Tocar na Tarefa ‚Üí Menu de A√ß√µes
    ‚îÇ                             ‚îÇ   ‚îú‚îÄ‚îÄ Executar ‚Üí TaskExecutionScreen
    ‚îÇ                             ‚îÇ   ‚îú‚îÄ‚îÄ Editar ‚Üí TaskFormScreen (com taskId)
    ‚îÇ                             ‚îÇ   ‚îú‚îÄ‚îÄ Cancelar ‚Üí Dialog de confirma√ß√£o
    ‚îÇ                             ‚îÇ   ‚îî‚îÄ‚îÄ Voltar ‚Üí TaskListScreen
    ‚îÇ                             ‚îî‚îÄ‚îÄ FAB (+) ‚Üí TaskFormScreen (nova tarefa)
    ‚îÇ
    ‚îî‚îÄ‚îÄ Bot√£o "Debug" ‚Üí DebugScreen
                          ‚îú‚îÄ‚îÄ MVP-01: Estrutura Base ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-02: Entidades ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-03: Database ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-04: Reposit√≥rios ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-05: Use Cases ‚úÖ
                          ‚îú‚îÄ‚îÄ MVP-06: Theme ‚úÖ
                          ‚îú‚îÄ‚îÄ TTS Test ‚Üí TtsTestScreen
                          ‚îî‚îÄ‚îÄ ASR Test ‚Üí AsrTestScreen
```

**Observa√ß√£o importante**: Os bot√µes da HomeScreen ser√£o exibidos condicionalmente baseado no estado:
- Sem perfil cadastrado ‚Üí Mostra apenas "Cadastrar Crian√ßa" e "Debug"
- Com perfil ‚Üí Mostra "Nova Tarefa", "Atividades", "Teste R√°pido" e "Debug"

---

## 4. Detalhamento de Telas

### 4.1 Telas Implementadas (MVP-01 a MVP-06)

#### 4.1.1 SplashScreen
- **Rota**: `"splash"`
- **Fun√ß√£o**: Tela inicial de boas-vindas
- **Dura√ß√£o**: 3 segundos ou toque para pular
- **Navega√ß√£o**: Autom√°tica para HomeScreen
- **Status**: ‚úÖ Implementado

#### 4.1.2 HomeScreen
- **Rota**: `"home"`
- **Fun√ß√£o**: Tela principal com menu de navega√ß√£o
- **Componentes**:
  - Bot√£o "Cadastro" (placeholder)
  - Bot√£o "Teste R√°pido" (placeholder)
  - Bot√£o "Atividades" (placeholder)
  - Bot√£o "Debug" (funcional)
- **Status**: ‚úÖ Implementado (parcial)

#### 4.1.3 DebugScreen
- **Rota**: `"debug"`
- **Fun√ß√£o**: Tela de desenvolvimento e testes
- **Componentes**:
  - Lista de status de MVPs
  - Bot√µes para testes de TTS e ASR
- **Navega√ß√£o**:
  - ‚Üí TtsTestScreen
  - ‚Üí AsrTestScreen
  - ‚Üê Voltar para HomeScreen
- **Status**: ‚úÖ Implementado

#### 4.1.4 TtsTestScreen
- **Rota**: `"tts_test"`
- **Fun√ß√£o**: Testar funcionalidade Text-to-Speech
- **Componentes**:
  - Campo de texto para entrada
  - Bot√£o "Falar"
  - Bot√£o voltar
- **Status**: ‚úÖ Implementado

#### 4.1.5 AsrTestScreen
- **Rota**: `"asr_test"`
- **Fun√ß√£o**: Testar funcionalidade de reconhecimento de voz
- **Componentes**:
  - √Årea de exibi√ß√£o de texto reconhecido
  - Bot√£o "Iniciar/Parar grava√ß√£o"
  - Bot√£o voltar
- **Status**: ‚úÖ Implementado

---

### 4.2 Telas Planejadas (MVP-07)

#### 4.2.1 OnboardingScreen
- **Rota**: `"onboarding"`
- **Fun√ß√£o**: Cadastro inicial do perfil da crian√ßa
- **Componentes**:
  - Campo: Nome da crian√ßa
  - Campo: Data de nascimento (DatePicker)
  - Campo: Observa√ß√µes (opcional)
  - Bot√£o "Salvar"
  - Bot√£o "Cancelar"
- **Valida√ß√µes**:
  - Nome obrigat√≥rio (m√≠n. 2 caracteres)
  - Data v√°lida
- **Navega√ß√£o**:
  - Sucesso ‚Üí HomeScreen
  - Cancelar ‚Üí HomeScreen
- **Status**: üìã Planejado (MVP-07)

#### 4.2.2 TaskFormScreen
- **Rota**: `"task_form"` ou `"task_form/{taskId}"`
- **Fun√ß√£o**: Criar ou editar tarefa
- **Componentes**:
  - Campo: Nome da tarefa
  - Campo: Descri√ß√£o
  - Campo: Hor√°rio (TimePicker - formato HH:mm)
  - Campo: Tipo de tarefa (Dropdown)
  - Campo: N√∫mero de estrelas (1-5)
  - Lista de Steps (adicionar/remover)
  - Bot√£o "Salvar"
  - Bot√£o "Cancelar"
- **Valida√ß√µes**:
  - Nome obrigat√≥rio
  - Hor√°rio v√°lido (HH:mm)
  - Estrelas entre 1 e 5
  - Pelo menos 1 step
- **Navega√ß√£o**:
  - Sucesso ‚Üí Voltar (TaskListScreen ou HomeScreen)
  - Cancelar ‚Üí Voltar
- **Status**: üìã Planejado (MVP-07)

#### 4.2.3 TaskListScreen
- **Rota**: `"task_list"`
- **Fun√ß√£o**: Listar todas as tarefas cadastradas
- **Componentes**:
  - Lista de Cards de Tarefas
    - Nome da tarefa
    - Hor√°rio
    - Status (badge colorido)
    - N√∫mero de estrelas
  - FAB "Adicionar Tarefa"
  - Filtros (opcional)
- **A√ß√µes no Card**:
  - Toque longo ou menu ‚Üí Op√ß√µes
    - Executar
    - Editar
    - Cancelar
    - Excluir (com confirma√ß√£o)
- **Navega√ß√£o**:
  - Card ‚Üí Menu de a√ß√µes
  - FAB ‚Üí TaskFormScreen
  - Executar ‚Üí TaskExecutionScreen
  - Editar ‚Üí TaskFormScreen (com taskId)
- **Status**: üìã Planejado (MVP-07)

#### 4.2.4 TaskExecutionScreen
- **Rota**: `"task_execution/{taskId}"`
- **Fun√ß√£o**: Executar uma tarefa passo a passo
- **Componentes**:
  - Cabe√ßalho: Nome da tarefa
  - Progresso: Barra de progresso (steps conclu√≠dos/total)
  - √Årea principal:
    - Descri√ß√£o do step atual
    - Imagem/m√≠dia (se houver)
    - Instru√ß√µes de √°udio (TTS)
  - Bot√µes:
    - "Concluir Step" (checkbox grande)
    - "Voltar Step" (se n√£o for o primeiro)
    - "Pular"
    - "Cancelar Tarefa"
  - Rodap√©: Estrelas ganhas
- **Fluxo**:
  1. Carregar tarefa e steps
  2. Exibir step atual
  3. TTS l√™ a descri√ß√£o
  4. Usu√°rio completa step
  5. Avan√ßar para pr√≥ximo step
  6. Ao finalizar ‚Üí Tela de conclus√£o com estat√≠sticas
- **Navega√ß√£o**:
  - Conclus√£o ‚Üí HomeScreen ou TaskListScreen
  - Cancelar ‚Üí Voltar com confirma√ß√£o
- **Status**: üìã Planejado (MVP-07)

#### 4.2.5 TaskCompletionScreen (Opcional)
- **Rota**: `"task_completion/{taskId}"`
- **Fun√ß√£o**: Exibir resultado da execu√ß√£o da tarefa
- **Componentes**:
  - T√≠tulo: "Tarefa Conclu√≠da!" üéâ
  - Estat√≠sticas:
    - Steps conclu√≠dos
    - Tempo total
    - Estrelas ganhas
  - Mensagem motivacional
  - Bot√£o "Voltar"
- **Status**: üìã Planejado (MVP-08)

---

## 5. Defini√ß√£o de Rotas

### 5.1 Rotas Implementadas
```kotlin
NavHost(navController, startDestination = "splash") {
    composable("splash") { SplashScreen(navController) }
    composable("home") { HomeScreen(navController) }
    composable("debug") { DebugScreen(navController) }
    composable("tts_test") { TtsTestScreen(navController) }
    composable("asr_test") { AsrTestScreen(navController) }
}
```

### 5.2 Rotas Planejadas (MVP-07)
```kotlin
NavHost(navController, startDestination = "splash") {
    // Rotas existentes
    composable("splash") { SplashScreen(navController) }
    composable("home") { HomeScreen(navController) }
    composable("debug") { DebugScreen(navController) }
    composable("tts_test") { TtsTestScreen(navController) }
    composable("asr_test") { AsrTestScreen(navController) }
    
    // Novas rotas MVP-07
    composable("onboarding") { OnboardingScreen(navController) }
    composable("task_form") { TaskFormScreen(navController) }
    composable(
        "task_form/{taskId}",
        arguments = listOf(navArgument("taskId") { type = NavType.LongType })
    ) { backStackEntry ->
        TaskFormScreen(
            navController, 
            taskId = backStackEntry.arguments?.getLong("taskId")
        )
    }
    composable("task_list") { TaskListScreen(navController) }
    composable(
        "task_execution/{taskId}",
        arguments = listOf(navArgument("taskId") { type = NavType.LongType })
    ) { backStackEntry ->
        TaskExecutionScreen(
            navController,
            taskId = backStackEntry.arguments?.getLong("taskId") ?: 0L
        )
    }
}
```

---

## 6. Estados de Navega√ß√£o

### 6.1 Back Stack
- **SplashScreen**: N√£o volta (remove da pilha)
- **HomeScreen**: Raiz da navega√ß√£o principal
- **Outras telas**: Podem voltar para tela anterior

### 6.2 Navega√ß√£o Condicional
- Primeira execu√ß√£o ‚Üí OnboardingScreen obrigat√≥rio
- Perfil j√° cadastrado ‚Üí Direto para HomeScreen

---

## 7. Deep Links (Futuro)

Planejado para MVP-09+:
- `pequenospassos://task/{taskId}` ‚Üí Abrir tarefa espec√≠fica
- `pequenospassos://execute/{taskId}` ‚Üí Executar tarefa diretamente

---

## 8. Anima√ß√µes de Transi√ß√£o (Futuro)

Planejado para MVP-08+:
- Slide: Telas principais
- Fade: Dialogs e overlays
- Scale: Modais

---

## 9. Navega√ß√£o Bottom Bar (Futuro)

Considerado para MVP-10:
```
Bottom Navigation:
‚îú‚îÄ‚îÄ Home (√≠cone casa)
‚îú‚îÄ‚îÄ Atividades (√≠cone lista)
‚îú‚îÄ‚îÄ Adicionar (√≠cone +, central, elevado)
‚îú‚îÄ‚îÄ Estat√≠sticas (√≠cone gr√°fico)
‚îî‚îÄ‚îÄ Perfil (√≠cone usu√°rio)
```

---

## 10. Fluxo de Primeira Execu√ß√£o

```
App Launch
    ‚Üì
SplashScreen (3s)
    ‚Üì
CheckFirstRun (UseCase)
    ‚îú‚îÄ‚îÄ Primeira vez ‚Üí OnboardingScreen ‚Üí HomeScreen
    ‚îî‚îÄ‚îÄ J√° cadastrado ‚Üí HomeScreen
```

---

## 11. Diagrama de Navega√ß√£o Completo (MVP-07+)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SplashScreen   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ (3s)
         ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ First Run? ‚îÇ
    ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇYes  ‚îÇNo
       ‚Üì     ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇOnboarding‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
     ‚îÇ       ‚îÇ
     ‚Üì       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     HomeScreen      ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ   ‚îÇ   ‚îÇ    ‚îÇ
   ‚îÇ   ‚îÇ   ‚îÇ    ‚îî‚îÄ‚îÄ‚Üí DebugScreen ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚Üí TtsTestScreen
   ‚îÇ   ‚îÇ   ‚îÇ                        ‚îî‚îÄ‚îÄ‚Üí AsrTestScreen
   ‚îÇ   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚Üí TaskListScreen ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚Üí TaskExecutionScreen
   ‚îÇ   ‚îÇ                         ‚îî‚îÄ‚îÄ‚Üí TaskFormScreen (edit)
   ‚îÇ   ‚îÇ
   ‚îÇ   ‚îî‚îÄ‚îÄ‚Üí TaskExecutionScreen (quick)
   ‚îÇ
   ‚îî‚îÄ‚îÄ‚Üí TaskFormScreen (new)
```

---

## 12. Considera√ß√µes de UX

### 12.1 Navega√ß√£o Intuitiva
- Bot√µes de a√ß√£o claros e grandes (acessibilidade)
- Feedback visual em todas as a√ß√µes
- Confirma√ß√£o para a√ß√µes destrutivas

### 12.2 Performance
- Lazy loading de telas
- Cache de dados de navega√ß√£o
- Pr√©-carregamento de telas frequentes

### 12.3 Acessibilidade
- Suporte a TalkBack
- Navega√ß√£o por teclado (quando aplic√°vel)
- Semantic descriptions em todos os elementos

---

## 13. Hist√≥rico de Mudan√ßas

| Vers√£o | Data       | MVP    | Mudan√ßas                          |
|--------|------------|--------|-----------------------------------|
| 1.0    | 2025-10-10 | MVP-01 | Navega√ß√£o b√°sica inicial          |
| 1.1    | 2025-10-15 | MVP-07 | Planejamento completo de navega√ß√£o|

---

**√öltima atualiza√ß√£o**: 2025-10-15  
**Vers√£o do documento**: 1.1  
**Status**: Ativo e em expans√£o
